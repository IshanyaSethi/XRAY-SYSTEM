{
  "execution_id": "fac9b00f-1215-4dde-ac24-9b7da42d7e9e",
  "name": "competitor_selection",
  "steps": [
    {
      "name": "keyword_generation",
      "inputs": {
        "product_title": "Stainless Steel Water Bottle 32oz",
        "category": "Sports & Outdoors"
      },
      "outputs": {
        "keywords": [
          "stainless steel water bottle 32oz",
          "water bottle",
          "reusable bottle",
          "stainless steel",
          "32oz",
          "sports bottle"
        ],
        "model": "gpt-4 (simulated)",
        "keyword_count": 6
      },
      "reasoning": "Generated 6 keywords using product_type_match - matched product type: water bottle",
      "metadata": {
        "extraction_method": "product_type_match",
        "matched_product_type": "water bottle",
        "matched_category": null,
        "keyword_count_before_dedup": 6,
        "keyword_count_after_dedup": 6
      },
      "timestamp": "2025-12-29T19:52:36.725355",
      "duration_ms": 0.012159347534179688
    },
    {
      "name": "candidate_search",
      "inputs": {
        "search_keyword": "stainless steel water bottle 32oz",
        "category_filter": "Sports & Outdoors",
        "limit": 3
      },
      "outputs": {
        "total_results_available": 2847,
        "candidates_fetched": 3,
        "status": "success",
        "candidates": [
          {
            "asin": "B0COMP01",
            "title": "HydroFlask 32oz Wide Mouth",
            "price": 44.99,
            "rating": 4.5,
            "reviews": 8932,
            "category": "Sports & Outdoors"
          },
          {
            "asin": "B0COMP02",
            "title": "Yeti Rambler 26oz",
            "price": 34.99,
            "rating": 4.4,
            "reviews": 5621,
            "category": "Sports & Outdoors"
          },
          {
            "asin": "B0COMP03",
            "title": "Replacement Lid for HydroFlask",
            "price": 12.99,
            "rating": 4.6,
            "reviews": 3421,
            "category": "Accessories"
          }
        ]
      },
      "reasoning": "Searched using keyword 'stainless steel water bottle 32oz' in category 'Sports & Outdoors': found 3 unique candidates from 3 total results (2847 total matches available - mock data)",
      "metadata": {},
      "timestamp": "2025-12-29T19:52:36.830461",
      "duration_ms": 105.07082939147949
    },
    {
      "name": "apply_filters",
      "inputs": {
        "candidates_count": 3,
        "reference_product": {
          "asin": "TEST123",
          "title": "Stainless Steel Water Bottle 32oz",
          "price": 29.99,
          "category": "Sports & Outdoors"
        },
        "filter_criteria": {
          "price_range": {
            "min": 14.995,
            "max": 59.98
          },
          "min_rating": 3.8,
          "min_reviews": 100
        }
      },
      "outputs": {
        "total_evaluated": 3,
        "passed": 2,
        "failed": 1,
        "status": "success"
      },
      "reasoning": "Applied 3 filters to 3 candidates: 2 passed, 1 failed (1 failed price range)",
      "metadata": {
        "filters_applied": {
          "price_range": {
            "min": 14.995,
            "max": 59.98,
            "rule": "0.5x - 2x of reference price"
          },
          "min_rating": {
            "value": 3.8,
            "rule": "Must be at least 3.8 stars"
          },
          "min_reviews": {
            "value": 100,
            "rule": "Must have at least 100 reviews"
          }
        },
        "evaluations": [
          {
            "asin": "B0COMP01",
            "title": "HydroFlask 32oz Wide Mouth",
            "metrics": {
              "price": 44.99,
              "rating": 4.5,
              "reviews": 8932
            },
            "filter_results": {
              "price_range": {
                "passed": true,
                "detail": "$44.99 is within $14.99-$59.98"
              },
              "min_rating": {
                "passed": true,
                "detail": "4.5 >= 3.8 threshold"
              },
              "min_reviews": {
                "passed": true,
                "detail": "8932 >= 100 minimum"
              }
            },
            "qualified": true
          },
          {
            "asin": "B0COMP02",
            "title": "Yeti Rambler 26oz",
            "metrics": {
              "price": 34.99,
              "rating": 4.4,
              "reviews": 5621
            },
            "filter_results": {
              "price_range": {
                "passed": true,
                "detail": "$34.99 is within $14.99-$59.98"
              },
              "min_rating": {
                "passed": true,
                "detail": "4.4 >= 3.8 threshold"
              },
              "min_reviews": {
                "passed": true,
                "detail": "5621 >= 100 minimum"
              }
            },
            "qualified": true
          },
          {
            "asin": "B0COMP03",
            "title": "Replacement Lid for HydroFlask",
            "metrics": {
              "price": 12.99,
              "rating": 4.6,
              "reviews": 3421
            },
            "filter_results": {
              "price_range": {
                "passed": false,
                "detail": "$12.99 is outside $14.99-$59.98"
              },
              "min_rating": {
                "passed": true,
                "detail": "4.6 >= 3.8 threshold"
              },
              "min_reviews": {
                "passed": true,
                "detail": "3421 >= 100 minimum"
              }
            },
            "qualified": false
          }
        ],
        "failed_by_filter": {
          "price_range": 1,
          "min_rating": 0,
          "min_reviews": 0
        },
        "failed_candidates": [
          {
            "asin": "B0COMP03",
            "title": "Replacement Lid for HydroFlask",
            "failed_filters": [
              "price_range"
            ],
            "metrics": {
              "price": 12.99,
              "rating": 4.6,
              "reviews": 3421
            }
          }
        ]
      },
      "timestamp": "2025-12-29T19:52:36.830514",
      "duration_ms": 0.030279159545898438
    },
    {
      "name": "llm_relevance_evaluation",
      "inputs": {
        "candidates_count": 2,
        "reference_product": {
          "asin": "TEST123",
          "title": "Stainless Steel Water Bottle 32oz",
          "price": 29.99,
          "rating": 4.2,
          "reviews": 1247,
          "category": "Sports & Outdoors"
        },
        "reference_category": "Sports & Outdoors",
        "model": "gpt-4 (simulated)"
      },
      "outputs": {
        "total_evaluated": 2,
        "confirmed_competitors": 2,
        "false_positives_removed": 0,
        "status": "success"
      },
      "reasoning": "All 2 candidates passed relevance evaluation - no false positives detected",
      "metadata": {
        "evaluations": [
          {
            "asin": "B0COMP01",
            "title": "HydroFlask 32oz Wide Mouth",
            "category": "Sports & Outdoors",
            "is_competitor": true,
            "confidence": 0.95,
            "accepted_reason": "Passed all checks: main product in category 'Sports & Outdoors'"
          },
          {
            "asin": "B0COMP02",
            "title": "Yeti Rambler 26oz",
            "category": "Sports & Outdoors",
            "is_competitor": true,
            "confidence": 0.95,
            "accepted_reason": "Passed all checks: main product in category 'Sports & Outdoors'"
          }
        ],
        "rejected_candidates": [],
        "rejection_summary": {}
      },
      "timestamp": "2025-12-29T19:52:37.031110",
      "duration_ms": 200.51884651184082
    },
    {
      "name": "rank_and_select",
      "inputs": {
        "candidates_count": 2,
        "reference_product": {
          "asin": "TEST123",
          "title": "Stainless Steel Water Bottle 32oz",
          "price": 29.99
        },
        "ranking_weights": {
          "review_count": 0.5,
          "rating": 0.3,
          "price_proximity": 0.2
        }
      },
      "outputs": {
        "selected_competitor": {
          "asin": "B0COMP01",
          "title": "HydroFlask 32oz Wide Mouth",
          "metrics": {
            "price": 44.99,
            "rating": 4.5,
            "reviews": 8932
          },
          "score_breakdown": {
            "review_count_score": 0.8932,
            "rating_score": 0.75,
            "price_proximity_score": 0.4998332777592529
          },
          "total_score": 0.7715666555518506,
          "rank": 1
        },
        "ranked_count": 2,
        "status": "competitor_selected"
      },
      "reasoning": "Selected 'HydroFlask 32oz Wide Mouth' (rank #1, score: 0.772) from 2 ranked candidates. Scoring weights: review_count 50%, rating 30%, price_proximity 20%",
      "metadata": {
        "ranking_criteria": {
          "primary": "review_count",
          "secondary": "rating",
          "tertiary": "price_proximity"
        },
        "ranking_weights": {
          "review_count": 0.5,
          "rating": 0.3,
          "price_proximity": 0.2
        },
        "ranked_candidates": [
          {
            "asin": "B0COMP01",
            "title": "HydroFlask 32oz Wide Mouth",
            "metrics": {
              "price": 44.99,
              "rating": 4.5,
              "reviews": 8932
            },
            "score_breakdown": {
              "review_count_score": 0.8932,
              "rating_score": 0.75,
              "price_proximity_score": 0.4998332777592529
            },
            "total_score": 0.7715666555518506,
            "rank": 1
          },
          {
            "asin": "B0COMP02",
            "title": "Yeti Rambler 26oz",
            "metrics": {
              "price": 34.99,
              "rating": 4.4,
              "reviews": 5621
            },
            "score_breakdown": {
              "review_count_score": 0.5621,
              "rating_score": 0.7000000000000002,
              "price_proximity_score": 0.8332777592530842
            },
            "total_score": 0.657705551850617,
            "rank": 2
          }
        ]
      },
      "timestamp": "2025-12-29T19:52:37.031172",
      "duration_ms": 0.028848648071289062
    }
  ],
  "started_at": "2025-12-29T19:52:36.725140",
  "ended_at": "2025-12-29T19:52:37.031227",
  "metadata": {
    "reference_product_id": "TEST123"
  }
}